# Dotfiles
In this repo are three branches that extend eachother:

* `base` - Includes base dotfiles for a console install with no networking configured.
	* ~~`server` - The setup that is curently deployed to my home server.~~ - *This is not yet implemented.*
	* `desktop` - A desktop installation based on Gnome and all my programs.
		* `laptop` - Extension of `desktop` that includes drivers for intel graphics drivers and hardware decoding. Also includes `pulseeffects-legacy`.
		* ~~`computer` - Install meant for my desktop computer with amd graphics drivers and hardware decoding. Also includes a vfio setup for gpu passthrough to a windows vm.~~ - *This is not yet implemented.*

## Installing
There are several numbered scripts in the `.dotfiles` folder that will take you from the Arch Installer to a useable desktop. 

1. To begin ensure that your target disk has the following partitions:
	* `FAT32` partition with `esp` and `boot` flags (ideally 500MB).
	* `ext4` partition for the root.
		* You should clone this repo to the root of this partition so that you have access to it in the installer. Ensure that you are on the correct branch by running:
			
			```
			# git checkout [branchname]
			```
	
	Any paritions you don't mount in the installer will not be touched so this should work with dual boot systems.
1. Boot from the [Arch Installer](https://archlinux.org/download/) and connect to a network. If you have ethernet this will be done automatically. If you have wifi you should run `iwctl`.
1. Mount the partitions that you want to install Arch to in the following hierarchy:

	| Partition | Installer Filesystem |
	| :-: | :-: |
	| `root` | `/mnt` |
	| `boot` | `/mnt/boot` |
	
	You will have to create a `boot` directory in the root of the `root` partition when you have mounted it.
1. Enter the `/mnt/dotfiles/.dotfiles` folder that you cloned to the root partiiton earlier. 

	Start by running `./1.sh` and follow the instructions when prompted.
	
	* There are several checks in place to ensure that there is internet when required and that partiions are mounted. 
	* Messages generated by the script are in pink text.