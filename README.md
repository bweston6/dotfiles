# Dotfiles
> ## From installer to desktop in 15 minutes!

This repo provides my dotfiles and two main scripts:

* `installer.sh` - Takes you from the arch installer to a boot-able system.
* `bootstrap.sh` - Takes the boot-able system and installs all dotfiles and customisations.
	
Both of these scripts aim to be idempotent such that if there is an error or you want to re-run `bootstrap.sh` there will be no ill-effects.

### Machine Types
There are three main classes of machine that the scripts can configure:

* `Desktop` - Must have `Desktop` in the hostname.
	* The previous configuration on my desktop computer: running Gnome.
* `Laptop` - Must have `Laptop` in the hostname.
	* The current configuration on my laptop: running Gnome, with EQ for the speakers, eGPU support and 105mV undervolt.
* `Server` - Must have `Serv` in the hostname.
	* The current configuration for my media server.
		* Partially implemented.

If none of the above strings are found in the target machine's hostname then a generic install is performed. This includes minimal programs and only dotfiles for command-line programs installed. 

## Installing
There are two main scripts in the `.dotfiles` folder that will take you from the Arch Installer to a useable desktop. 

1. To begin ensure that your target disk has the following partitions:
	* `FAT32` partition with `esp` and `boot` flags (ideally 500MB).
	* `ext4` partition for the root.

	Any paritions you don't mount in the installer will not be touched so this should work with dual boot systems.
1. Boot from the [Arch Installer](https://archlinux.org/download/) and connect to a network. If you have ethernet this will be done automatically. If you have wifi you should run `iwctl`.
1. Mount the partitions that you want to install Arch to in the following hierarchy:

	| Partition | Installer Filesystem |
	| :-: | :-: |
	| `root` | `/mnt` |
	| `boot` | `/mnt/boot` |
	
	You will have to create a `boot` directory in the root of the `root` partition when you have mounted it.
1. Clone this repo to the installer usb so that you have access to the scripts:
	
	```
	pacman -Sy git
	git clone https://github.com/bweston6/dotfiles
	```
	
1. Enter the dotfiles directory you have cloned and run `./installer.sh`. The scripts will prompt you with other instructions:
	
	* Ensure to enter a hostname that matches your desired machine type from above.
	* There are several checks in place to ensure that there is internet when required and that partiions are mounted. 
	* Messages generated by the script are in pink text.
